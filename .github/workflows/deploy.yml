name: CI - Deploy to Vercel (Simulated)

on:
  push:
    branches:
      - main

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: CI: Simulate build
        run: |
          echo "### CI: Building application..."
          sleep 1
          echo "### CI: Build complete."

      - name: CI: Simulate container push
        run: |
          echo "### CI: Pushing image to registry (simulated)..."
          sleep 1
          echo "Pushed: registry.example.com/youruser/gitops-demo:latest"

      - name: CI: Simulate kubectl apply
        run: |
          echo "### CI: Applying k8s manifests..."
          ls k8s || true
          echo "Applied: k8s/deployment.yml"
          echo "Applied: k8s/service.yml"

      - name: Finished
        run: echo "CI simulation finished âœ…"
